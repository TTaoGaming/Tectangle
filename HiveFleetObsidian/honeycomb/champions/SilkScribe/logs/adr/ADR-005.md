---
adr_id: ADR-005
title: Evolutionary mini-game generation via GameSpec + MAP-Elites
status: Proposed
date: 2025-09-20
owners: [Tom Tai]
tags: [evolutionary, automation, content]
guard: SIM_TRIPWIRE: variants failing QoS ship path (FPS<30 or QoS miss >2%/min)
flag: FEATURE_FLAG: evo.factory_v0
context: |
  We want scalable content without hand-authoring every variant; must stay stable and fun.
decision: |
  - Define GameSpec (JSON) knobs: gravity, spawn rates, FSM K/thresholds, windows.
  - Mutate/speciate within safe bounds; evaluate with fitness proxies (session length,
    retry rate, perfect timings); maintain diversity with MAP-Elites grid.
  - Only auto-promote winners passing QoS gates.
consequences: |
  + Scales content; explores design space; keeps variety.
  - Needs guardrails to prevent low-quality variants.
alternatives_considered:
  - Manual curation only: slow throughput.
  - RL agents: heavier infra; later.
metrics:
  success:
    - Batch -> >=10% promotable variants; median session length of winners +20% vs baseline.
  tripwires:
    - If winners regress QoS -> tighten bounds or adjust fitness.
rollout_plan: |
  Offline tool first; manual review; then nightly batch with small canary.
notes: |
  Log specs with variant IDs; enable rollback of any promoted variant.
---
