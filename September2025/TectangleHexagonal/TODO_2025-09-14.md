<!--
STIGMERGY REVIEW HEADER
Status: Pending verification
Review started: 2025-09-16T19:48-06:00
Expires: 2025-09-23T19:48-06:00 (auto-expire after 7 days)

Checklist:
- [ ] Re-evaluate this artifact against current Hexagonal goals
- [ ] Log decisions in TODO_2025-09-16.md
-->

# TODO — 2025-09-14 (Velocity‑assisted Up + Predictive Ghost)

Shipped yesterday → today

- Index pipeline stable; 4‑pinches clip at 3/3 after exitDebounce + short confirm window; OneEuro faster.
- Vendor bridge validated earlier; will re‑check once 4/4 lands.

Next small steps (<1 day, reversible)

- [ ] Velocity‑assisted Up: treat Up when (norm > exit) OR (vRel > 0 and norm > mid) sustained ≥ confirmUpMs.
- [x] Predictive “Ghost” lookahead: compute ghostNorm(t+Δ) from user timing window; allow ghost to arm release when palmGate ok.
- [ ] Config: expose CONFIRM_UP_MS (default 90), PALM_STABLE_MS (default 0) in dev UI and automation env.
- [ ] Telemetry: log vRel/aRel at down/up, ghost snapshots, gating state; persist in JSONL.
- [x] Baselines: run palm_facing_clip_v1 → expect 1/1; run two_slow_then_two_fast → target 4/4 (first clip passing, second queued).
- [x] Harness: add `?noauto=1` and page‑timeout plumb to avoid webcam hangs and long waits; persist ghost counts.
- [x] Demo: add `dev/ghost_predictive_pinch_dino.html` (ghost down/up → Space) for quick game validation.

Follow‑ups (tiny, reversible)

- [ ] PostMessage from ghost page for down/up to avoid DOM polling in the bridge.
- [ ] Tune lookahead Δt to yield positive (actual−ghost) ms consistently on enter.
- [ ] Vendor smoke: Dino/Flappy counts match downs/ups (Space).

Design/notes (queued, not blocking today)

- Palm gating stability window (80–120 ms) and cone tuning.
- Finger‑bend assist (index/thumb PIP angle) for slow exits.
- Quantization window for down/hold/up to de‑bounce frame jitter.
- Visuals: HUD annotate vRel/aRel, ghost vs actual, gate timeline.
- Re‑ID: bone chain + bone‑ratio bio hash (doc stub), per‑session calibration.

Acceptance today

- 4/4 on 4‑pinches without duplicate downs; 1/1 on baseline; vendor bridge reflects 1 button = 1 press.

 
## Per‑hand IDs, calibration, and biomech fingerprint (queued)

- [ ] Expose per‑hand anatomical span controls (cm) in UI; persist per handId.
- [ ] Add handId field in core outputs; provisional assignment via greedy nearest‑wrist (left/right) per frame.
- [ ] Controller pairing flow: user performs a “claim” gesture (pinch‑hold 2s) to bind to Controller 1/2; visual confirm.
- [ ] Joint‑angle API: compute index/thumb MCP/PIP/DIP/CMC/MCP/IP angles from `landmarksRaw`; export helper.
- [ ] Bone chains: derive lengths and ratios (phalanx segments, metacarpal spans); cache per hand for stability.
- [ ] Biomechanical hash: stable hash from angle + ratio vectors (median over N frames) to re‑identify hands across occlusions.
- [ ] Telemetry: log per‑hand calibration, angle vectors, and hash (privacy toggle).
- [ ] Dino/ghost demos: seat selection UI (Controller 1/2/3/4) + gesture claim; route pinch:down/up by seat.
- [ ] Docs: pairing UX, fallback rules, privacy notes; troubleshooting for multi‑user clips.
