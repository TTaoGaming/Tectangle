<!--
STIGMERGY REVIEW HEADER
Status: Pending verification
Review started: 2025-09-16T19:48-06:00
Expires: 2025-09-23T19:48-06:00 (auto-expire after 7 days)

Checklist:
- [ ] Re-evaluate this artifact against current Hexagonal goals
- [ ] Log decisions in TODO_2025-09-16.md
-->

# TODO — 2025-09-12 (First reversible slice)

- Record–Replay docs: added pattern to README/agent.md.
- Scaffolds added: TelemetryManager, WatchdogManager, replay runner.

Next small steps (<1 day, reversible)

- Wire TelemetryManager into dev page to expose `window.__getTelemetry()` snapshot to sinks.
- Add npm script: `hex:replay` to run tests/replay/replay_page_from_trace.mjs.
- Create CI step to load landmarks and assert envelopes using WatchdogManager rules.
- Add unit for gated clip with real `out/*.landmarks.jsonl` fixture once available.
- Audit checklist doc: ports vs core boundaries; adapters only touch DOM/IO; event names stable.

Today: Phase 0 — Single‑Pinch TOI + Validation

- Replay + validate now
	- [ ] Generate analysis for both clips: `hex:analyze` (pinch) and same for gated; run `hex:validate`.
	- [ ] Run `hex:validate:goldens` and `hex:assert:docs`; paste results into a short note.
- Instrumentation stubs
	- [ ] Add actual‑TOI estimator (zero‑crossing of approach velocity) — stub + telemetry only.
	- [ ] Expose per‑event telemetry: `toiPred`, `toiActual`, `toiErr`, `speculative?`, `latencyMs`.
	- [ ] Add negative‑latency controller stub (bounded EMA/KF), disabled by default.
- Calibration & config
	- [ ] Metronome calibration harness: per‑finger capture plan + persist to `localStorage`.
	- [ ] Persist One‑Euro + thresholds per hand/finger; add import/export.
- CI gates
	- [ ] Gate on |TOI error| ≤ 20 ms, spec cancel ≤ 10%, down→up order; include pinch and gated fixtures.
- UI cleanup
	- [ ] Side Panel: Pinch Stats + single Start/Stop/Export button; remove floating HUD.
	- [ ] Surface One‑Euro knobs and enter/exit/cone; show last TOI error.

Near‑next (scoped design only)

- [ ] Keyboard mapping config: wrist‑quaternion × 4 pinches/hand plan (fields, JSON I/O).
- [ ] SDK/API skeleton: `IManager` interface + public facade (`init/setKeyMap/on/exportTelemetry`).

Notes

- Keep adapters thin; don’t couple schema logic into core.
- Prefer frames (IMAGE) replays for determinism.
