---
title: "Tommy Notes Summary"
created_at: "2025-09-01T21:20:29.202Z"
version: "0.1"
source_files:
  - [`September2025/Tectangle/TommyNotesAugust2025.txt`](September2025/Tectangle/TommyNotesAugust2025.txt:1)
  - [`September2025/Tectangle/TommyNotesSeptember2025.txt`](September2025/Tectangle/TommyNotesSeptember2025.txt:1)
author: "auto-generated by Architect task"
---

TL;DR

- High-level vision: Hope OS / Tectangle is a gesture-first input layer that maps robust hand pinches, wrist orientation, and spatial anchors into deterministic, low-latency controls for musical and educational applications.

- Immediate tactical goal: improve pinch reliability (triple-redundant detection), fix sidepanel and HUD UX, add deterministic smoothing controls, and move to a manager-based architecture so each subsystem is a smoketestable black box.

- Strategic goal: build an education- and deployment-ready input layer (scalable across phones/chromebooks) that enables Hope OS-style applications, demos, and later a telemetry-backed productization pipeline.

Key consolidated goals & features (prioritized)

1. 4-pinches per hand + wrist-quaternion keyboard mapping
   - Rationale: enables richer mappings (more keys / expressive controls) and is requested explicitly in the notes. (see [`September2025/Tectangle/TommyNotesAugust2025.txt`](September2025/Tectangle/TommyNotesAugust2025.txt:1))

2. Triple-redundancy pinch algorithm (knuckle-span + velocity/accel gating + joint-angle verification)
   - Rationale: multiple independent signals reduce false positives on mid-range devices. (see [`September2025/Tectangle/TommyNotesSeptember2025.txt`](September2025/Tectangle/TommyNotesSeptember2025.txt:1))

3. Deterministic smoothing slider + One‑Euro option
   - Rationale: user-adjustable tradeoff between smoothness and responsiveness; notes call for a single deterministic slider. (see [`September2025/Tectangle/TommyNotesAugust2025.txt`](September2025/Tectangle/TommyNotesAugust2025.txt:1))

4. Telemetry: single start/stop/export control + telemetry UX in sidepanel
   - Rationale: simplify recording and analysis workflow; move recording controls into the sidepanel. (see [`September2025/Tectangle/TommyNotesSeptember2025.txt`](September2025/Tectangle/TommyNotesSeptember2025.txt:1))

5. Sidepanel fixes + remove floating HUD
   - Rationale: UI contains legacy artifacts from the 3dplayground foundation app and floating HUD causes errors. (see [`September2025/Tectangle/TommyNotesAugust2025.txt`](September2025/Tectangle/TommyNotesAugust2025.txt:1))

6. Mini-games and demos (UFO grabber, Kabuto sumo, Pachinko)
   - Rationale: lightweight demos accelerate usability testing and recruitment of early users. (see [`September2025/Tectangle/TommyNotesAugust2025.txt`](September2025/Tectangle/TommyNotesAugust2025.txt:1))

7. Quantization module (BPM, strength, swing, humanize)
   - Rationale: musical context requires flexible quantization for expressive play and MPE integration. (see [`September2025/Tectangle/TommyNotesAugust2025.txt`](September2025/Tectangle/TommyNotesAugust2025.txt:1))

8. Manager interface spec + registry
   - Rationale: standardizing manager APIs makes subsystems smoke-testable and easier for AI agents to modify. (see [`September2025/Tectangle/TommyNotesSeptember2025.txt`](September2025/Tectangle/TommyNotesSeptember2025.txt:1))

9. Smoke harness for automated replay tests and golden masters
   - Rationale: reproducible failure modes and golden recordings will speed debugging and tuning. (see [`September2025/Tectangle/TommyNotesAugust2025.txt`](September2025/Tectangle/TommyNotesAugust2025.txt:1))

10. Camera manager logging + camera alignment checks
    - Rationale: misalignment after switching to CameraManager is a suspected source of visual offsets; add startup logging for debugging. (see [`September2025/Tectangle/TommyNotesAugust2025.txt`](September2025/Tectangle/TommyNotesAugust2025.txt:1))

Technical gap analysis (mapping gaps → code areas)

- EMA smoothing / buffering introducing multi-second lag
  - Location: smoothing and landmark pipelines (likely under foundation smoothing and PinchDetector modules). Impact: High. Difficulty: Medium. Why: notes explicitly call out added EMA buffer causing seconds of pinch lag. (see notes: [`September2025/Tectangle/TommyNotesAugust2025.txt`](September2025/Tectangle/TommyNotesAugust2025.txt:1))

- Duplicated / inconsistent camera input logic (old camera vs CameraManager)
  - Location: camera input files (suggested: [`August Tectangle Sprint/tectangle-gesture-keyboard-mobile/src/CameraManager.js`](August Tectangle Sprint/tectangle-gesture-keyboard-mobile/src/CameraManager.js:1)). Impact: High. Difficulty: Medium.

- Missing manager interface standard (each manager has different top-level headers / APIs)
  - Location: codebase-wide; recommend central registry at `lib/manager-registry.js`. Impact: High. Difficulty: Low–Medium.

- Telemetry UX and single-button recording (start/stop/export) not implemented / scattered
  - Location: UI sidepanel code (suggested: [`August Tectangle Sprint/tectangle-gesture-keyboard-mobile/src/ui/SidePanel.js`](August Tectangle Sprint/tectangle-gesture-keyboard-mobile/src/ui/SidePanel.js:1)). Impact: Medium. Difficulty: Low.

- Pinch misclassification and multi-hand occupancy (two virtual hands mapped to one real hand)
  - Location: landmark filtering and hand-matching logic; EventBus routing may amplify this. See EventBus for mapping: [`August Tectangle Sprint/tectangle-gesture-keyboard-mobile/src/EventBusManager.js`](August Tectangle Sprint/tectangle-gesture-keyboard-mobile/src/EventBusManager.js:1). Impact: High. Difficulty: High.

- Legacy UI artifacts and floating HUD errors
  - Location: HUD / debug panels (suggested: [`August Tectangle Sprint/tectangle-gesture-keyboard-mobile/src/HUD.js`](August Tectangle Sprint/tectangle-gesture-keyboard-mobile/src/HUD.js:1)). Impact: Medium. Difficulty: Low.

- Missing deterministic quantization & lookahead primitives
  - Location: music/quantization code (suggested new module: `August Tectangle Sprint/foundation/quantize/Quantize.js`). Impact: Medium. Difficulty: Medium.

Proposed Manager / Interface Recommendations

- Minimal Manager API (each manager must implement):
  - init(config)
    - Initialize with config object, validate against configSchema, register event listeners, and allocate resources.
  - start()
    - Begin processing (frames, landmarks, telemetry, etc). Should be idempotent and quick.
  - stop()
    - Stop processing, flush telemetry, and free resources.
  - status()
    - Return a small status object { running: boolean, lastError: string|null, metrics: {...} } for smoke tests.
  - configSchema()
    - Return a JSON-schema describing expected config keys (used by UI and validation).
  - telemetryHook(event)
    - Optional callback invoked for telemetry/diagnostic events (used by central telemetry exporter).

- Registry and runner:
  - Suggested registry: [`lib/manager-registry.js`](lib/manager-registry.js:1) — exports registerManager(name, factory) and getManager(name).
  - Runner integration point: wire registry-managed managers to the EventBus at [`August Tectangle Sprint/tectangle-gesture-keyboard-mobile/src/EventBusManager.js`](August Tectangle Sprint/tectangle-gesture-keyboard-mobile/src/EventBusManager.js:1).

Prioritized next-steps (actionable TODOs)

Short (1–2 weeks) — six tasks

[ ] Add camera startup logging — modify [`August Tectangle Sprint/tectangle-gesture-keyboard-mobile/src/CameraManager.js`](August Tectangle Sprint/tectangle-gesture-keyboard-mobile/src/CameraManager.js:1) to console.log full startup config and selected resolution on init.

[ ] Move telemetry controls to sidepanel — modify [`August Tectangle Sprint/tectangle-gesture-keyboard-mobile/src/ui/SidePanel.js`](August Tectangle Sprint/tectangle-gesture-keyboard-mobile/src/ui/SidePanel.js:1) to add a single Start/Stop/Export button and visual recording state.

[ ] Remove floating HUD and re-parent essentials to bottom panel — edit [`August Tectangle Sprint/tectangle-gesture-keyboard-mobile/src/HUD.js`](August Tectangle Sprint/tectangle-gesture-keyboard-mobile/src/HUD.js:1) and sidepanel layout.

[ ] Add deterministic smoothing slider UI — create/modify [`August Tectangle Sprint/tectangle-gesture-keyboard-mobile/src/ui/SmoothingSlider.js`](August Tectangle Sprint/tectangle-gesture-keyboard-mobile/src/ui/SmoothingSlider.js:1) to expose oneEuro / EMA options with numeric values.

[ ] PinchDetector skeleton + unit tests — add [`August Tectangle Sprint/foundation/pinch/PinchDetector.js`](August Tectangle Sprint/foundation/pinch/PinchDetector.js:1) and tests in `tests/unit/pinch.detector.test.mjs`.

[ ] Create initial smoke harness entry — add `tests/smoke/initial-smoke.test.mjs` that replays a recorded landmark trace and asserts expected pinch events.

Medium (2–8 weeks) — four tasks

[ ] Implement manager registry and skeletons — add [`lib/manager-registry.js`](lib/manager-registry.js:1) and per-manager adapters (CameraManager, LandmarkManager, PinchDetectorManager).

[ ] Implement telemetry export (JSON/CSV) and storage — add exporter at `telemetry/exporter.js` and UI wiring in sidepanel.

[ ] Implement 3-redundant pinch algorithm in PinchDetector and smoke-test across golden recordings (`August Tectangle Sprint/foundation/pinch/PinchDetector.js`).

[ ] Implement multi-hand occupancy filter / hand-matching manager (`August Tectangle Sprint/tectangle-gesture-keyboard-mobile/src/HandFilterManager.js`).

Long (3+ months) — three tasks

[ ] Hybrid/cloud telemetry pipeline for long-term analytics and labelled datasets (storage: `telemetry/exports/` → cloud ingestion).

[ ] On-device model prototype (tiny ML) for pinch refinement and confidence scoring.

[ ] Productization plan: packaging, installer, performance optimization, privacy review, documentation and tutorials.

Suggested immediate PRs (5)

1) [`August Tectangle Sprint/tectangle-gesture-keyboard-mobile/src/CameraManager.js`](August Tectangle Sprint/tectangle-gesture-keyboard-mobile/src/CameraManager.js:1)
   - PR: Add startup logging, explicit resolution selection, and a small diagnostic dump on init.

2) [`August Tectangle Sprint/tectangle-gesture-keyboard-mobile/src/ui/SidePanel.js`](August Tectangle Sprint/tectangle-gesture-keyboard-mobile/src/ui/SidePanel.js:1)
   - PR: Move telemetry Start/Stop/Export into the sidepanel and add a recording LED + filename export.

3) [`August Tectangle Sprint/foundation/pinch/PinchDetector.js`](August Tectangle Sprint/foundation/pinch/PinchDetector.js:1)
   - PR: Add a canonical PinchDetector with three independent checks, simple confidence scoring, and unit tests.

4) [`lib/manager-registry.js`](lib/manager-registry.js:1)
   - PR: Add registry and basic API for registering, instantiating, and smoke-testing managers.

5) `tests/smoke/initial-smoke.test.mjs`
   - PR: Add smoke harness entry that replays a recorded landmark trace and asserts deterministic pinch events.

Risks & mitigations

1. Latency (pinch detection lag)
   - Mitigation: remove or retune large EMA buffers, expose smoothing slider, and add lookahead/physics-based time-to-contact prediction.

2. Privacy / telemetry leakage
   - Mitigation: anonymize exports by default, add opt-in telemetry, and document retention & access controls.

3. Model hallucination or overfitting (if ML used)
   - Mitigation: prefer deterministic heuristics for core pinch; use small on-device models only for confidence scoring with conservative thresholds.

4. Device fragmentation (phones, Chromebooks)
   - Mitigation: define minimal supported camera resolutions, CPU budget, and provide adaptive frame rates & fallbacks.

5. Test coverage gaps / non-determinism
   - Mitigation: implement smoke harness/golden recordings and centralize manager status/status checks for deterministic assertions.

6. UX confusion (floating HUD, legacy buttons)
   - Mitigation: remove floating HUD, consolidate controls into a minimal bottom panel and sidepanel, and publish a short UI guide.

Smoke harness & telemetry plan

- Design:
  - Replay-based smoke harness: replay recorded landmark traces and assert pinch events and statuses.
  - Pass/Fail criteria: expected pinch timestamps ± tolerance, no duplicate hand occupancy, and end-to-end UI state (recording LED) correctness.
  - Golden masters: store benchmark recordings under `tests/smoke/golden-master/`.

- File structure:
  - `tests/smoke/` — smoke tests and replayers
  - `tests/smoke/golden-master/` — canonical recordings
  - `telemetry/exports/` — exported session JSON/CSV files

- Sidepanel single-button UX:
  - Replace separate record / stop / export controls with one toggling control: [Start recording] → [Stop & prepare export] → [Export now]. Keep a visible filename and timestamp.
  - Wire telemetryHook(event) in managers to the central exporter to write per-manager diagnostics.

Consolidated quotes / highlights (appendix)

- "I want to keep managers only, ... black boxes with deterministic input output that I can smoketest." — core architecture request; source: [`September2025/Tectangle/TommyNotesAugust2025.txt`](September2025/Tectangle/TommyNotesAugust2025.txt:1).
  - Commentary: prioritize manager registry and per-manager headers so AI agents and humans can find interfaces.

- "The idea is 3 pinch redundancy systems ... knuckle span ratio ... velocity/acceleration ... joint-angle change" — explicit tactical design for pinch detection; source: [`September2025/Tectangle/TommyNotesSeptember2025.txt`](September2025/Tectangle/TommyNotesSeptember2025.txt:1).
  - Commentary: implement a canonical PinchDetector and unit-test against golden traces.

- "move telemetry recording button to be just 1, start/stop and export instead of 2 and put it into the sidepanel" — UX requirement; source: [`September2025/Tectangle/TommyNotesAugust2025.txt`](September2025/Tectangle/TommyNotesAugust2025.txt:1).
  - Commentary: a single control reduces user errors and simplifies automation.

References & links

- Source notes:
  - [`September2025/Tectangle/TommyNotesAugust2025.txt`](September2025/Tectangle/TommyNotesAugust2025.txt:1)
  - [`September2025/Tectangle/TommyNotesSeptember2025.txt`](September2025/Tectangle/TommyNotesSeptember2025.txt:1)

- EventBus mapping:
  - [`August Tectangle Sprint/tectangle-gesture-keyboard-mobile/src/EventBusManager.js`](August Tectangle Sprint/tectangle-gesture-keyboard-mobile/src/EventBusManager.js:1)

Footer

- Changelog
  - v0.1 — initial consolidated summary created by Architect task (2025-09-01T21:20:29.202Z) — auto-generated by Architect task